"use strict";var daf_igra_01={};daf_igra_01.CURRENT_ID=0,daf_igra_01.MAX_Y_POSITION=755,daf_igra_01.PARTICLE_MAX_OFFSET=150,daf_igra_01.GAME_TIME_IN_SECONDS=60,daf_igra_01.NEW_QUESTION_TIMER_IN_SECONDS=10,daf_igra_01.SPAWN_TIME_IN_SECONDS=1,daf_igra_01.ANSWER_FALL_TIME=20,daf_igra_01.MAX_ROTATION=30,daf_igra_01.EASING_FUNCTION_TO_USE="linear",daf_igra_01.CORRECT_SPAWN_PERCENT=50,daf_igra_01.CORRECT_ANSWER_POINTS=10,daf_igra_01.WRONG_ANSWER_POINTS=10,daf_igra_01.getPercentChance=function(n){return!(Math.floor(100*Math.random())>n)},daf_igra_01.getRandomIntInRange=function(n,e){return Math.floor(Math.random()*(e-n+1))+n},daf_igra_01.getRandomInRange=function(n,e){return Math.random()*(e-n)+n},daf_igra_01.removePreloader=function(){$("body").removeClass("loading")},daf_igra_01.DataHandler=function(){var n={};return n.init=function(){},n.getTitleData=function(){return i18n.t("titleView",{returnObjectTrees:!0})},n.getGameData=function(){return i18n.t("gameData",{returnObjectTrees:!0})},n.getFeedbackData=function(){return i18n.t("feedbackView",{returnObjectTrees:!0})},n.getGameViewData=function(){return i18n.t("gameView",{returnObjectTrees:!0})},n.getAudioData=function(){return i18n.t("audioData",{returnObjectTrees:!0})},n},daf_igra_01.TitleView=function(n){var e={};e.data=n.data;var a=function(){var n='\n    <div id="titleView" class="view">\n      <div class="viewContent">\n        <p class="annotation">'+e.data.text+'</p>\n        <div class="button">\n          <p>'+e.data.button+"</p>\n        </div>\n      </div>\n    </div>\n    ";$("#contentWrapper").append(n),$("#contentWrapper #titleView .button").one("click",t)},t=function(){$(e).trigger("onTitleViewClicked"),$("#contentWrapper #titleView").remove()};return e.init=function(){a()},e},daf_igra_01.FeedbackView=function(n){var e={},a=n.data,t=function(n){var e=a.text;e=e.replace("***","<span>"+n+"</span>");var t='\n    <div id="feedbackView" class="view">\n      <div class="viewContent">\n        <p class="annotation">'+e+'</p>\n        <div class="button">\n          <p>'+a.button+"</p>\n        </div>\n      </div>\n    </div>\n    ";$("#contentWrapper").append(t),$("#contentWrapper #feedbackView .button").one("click",i)},i=function(){$("#contentWrapper #feedbackView").remove(),$(e).trigger("onFeedbackViewClicked")};return e.init=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;t(n)},e},daf_igra_01.InfoBar=function(n){var e={},a=n.data,t=0,i=void 0,o=0,r=function(){var n='\n      <div id="infoBar">\n        <p id="time">\n          <span id="m">00</span>:<span id="s">00</span>\n        </p>\n        <p id="question">QUESTION</p>\n        <p id="score"><span id="pointsInt">0</span> <span>'+a.points+"</span></p>\n      </div>\n      ";$("#contentWrapper").append(n)},_=function(n){document.getElementById("question").innerHTML=n},d=function(n){$("#score #pointsInt").text(n.score).attr({"data-increment":"","data-score":n.increment?daf_igra_01.CORRECT_ANSWER_POINTS:daf_igra_01.WRONG_ANSWER_POINTS}),setTimeout(function(){$("#score #pointsInt").attr({"data-increment":!!n.increment})},50)},s=function(){o+=daf_igra_01.CORRECT_ANSWER_POINTS,d({score:o,increment:!0})},f=function(){o-=daf_igra_01.WRONG_ANSWER_POINTS,o=o<0?0:o,d({score:o,decrement:!0})},c=function(){return o},u=function(){i=setInterval(function(){g()},1e3),g()},g=function(){t<daf_igra_01.GAME_TIME_IN_SECONDS+1?(l(t),t++):(p(),$(e).trigger("onEndOfTime"))},p=function(){clearInterval(i),t=0},l=function(n){var e=(daf_igra_01.GAME_TIME_IN_SECONDS-n)%60,a=Math.floor((daf_igra_01.GAME_TIME_IN_SECONDS-n)/60);e="0"+e;var t=e.slice(-2);a="0"+a;var i=a.slice(-2),o='<span id="m">'+i+'</span>:<span id="s">'+t+"</span>";document.getElementById("time").innerHTML=o},m=function(){t=0,o=0,d({score:o}),$("#contentWrapper #infoBar").remove()};return e.init=function(){r(),u()},e.setQuestion=function(n){_(n)},e.incrementScore=function(){s()},e.decrementScore=function(){f()},e.getScore=function(){return c()},e.reset=function(){m()},e},daf_igra_01.SpawnControl=function(n){var e={},a=n.data,t=[],i=[],o=void 0,r=function(){return _(),daf_igra_01.CURRENT_ID=daf_igra_01.getRandomIntInRange(0,a.length-1),d(),a[daf_igra_01.CURRENT_ID].question},_=function(){t.length=0,i.length=0},d=function(){for(var n=0;n<a[daf_igra_01.CURRENT_ID].answers.length;n++)t.push(a[daf_igra_01.CURRENT_ID].answers[n]);for(var e=0;e<a.length;e++)if(e!==daf_igra_01.CURRENT_ID)for(var o=0;o<a[e].answers.length;o++)i.push(a[e].answers[o])},s=function(){},f=function(){g()},c=function(){clearTimeout(o),u()},u=function(){$("#gameView .answer").each(function(n,e){T($(e))})},g=function n(){var a="",r=0;daf_igra_01.getPercentChance(daf_igra_01.CORRECT_SPAWN_PERCENT)?(a=t[daf_igra_01.getRandomIntInRange(0,t.length-1)],r=daf_igra_01.CURRENT_ID):(a=i[daf_igra_01.getRandomIntInRange(0,i.length-1)],r=daf_igra_01.CURRENT_ID+1),$(e).trigger("onSpawn",{spawn:a});var _='\n    <div class="answer" data-id="'+r+'">\n      <div class="textWrapper">\n        <p>'+a+"</p>\n      </div>\n    </div>\n    ";$("#gameView").append(_),setTimeout(function(){p()},35),setTimeout(function(){l()},75),o=setTimeout(function(){n()},1e3*daf_igra_01.SPAWN_TIME_IN_SECONDS)},p=function(){var n,e=$("#gameView .answer").length,a=$($("#gameView .answer")[e-1]),t=a.outerWidth(),i=20,o=1024-t-i,r=daf_igra_01.getRandomIntInRange(-daf_igra_01.MAX_ROTATION,daf_igra_01.MAX_ROTATION);r=20,o<0?(o=0,n=0):n=daf_igra_01.getRandomIntInRange(i,o),a.css({left:n,top:r})},l=function(){var n=$("#gameView .answer").length,e=$($("#gameView .answer")[n-1]),a=0,t=daf_igra_01.getRandomIntInRange(-daf_igra_01.MAX_ROTATION,daf_igra_01.MAX_ROTATION);e.css({"-webkit-transform":"translate("+a+"px, "+daf_igra_01.MAX_Y_POSITION+"px) rotate("+t+"deg)","-moz-transform":"translate("+a+"px, "+daf_igra_01.MAX_Y_POSITION+"px) rotate("+t+"deg)","-o-transform":"translate("+a+"px, "+daf_igra_01.MAX_Y_POSITION+"px) rotate("+t+"deg)","-ms-transform":"translate("+a+"px, "+daf_igra_01.MAX_Y_POSITION+"px) rotate("+t+"deg)",transform:"translate("+a+"px, "+daf_igra_01.MAX_Y_POSITION+"px) rotate("+t+"deg)","-webkit-transition-duration":daf_igra_01.ANSWER_FALL_TIME+"s","transition-duration":daf_igra_01.ANSWER_FALL_TIME+"s","-webkit-transition-timing-function":daf_igra_01.EASING_FUNCTION_TO_USE,"-moz-transition-timing-function":daf_igra_01.EASING_FUNCTION_TO_USE,"-o-transition-timing-function":daf_igra_01.EASING_FUNCTION_TO_USE,"transition-timing-function":daf_igra_01.EASING_FUNCTION_TO_USE}),e.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",m)},m=function(n){T($(n.target))},T=function(n){n.off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",m),n.remove()},E=function(n){n.find(".textWrapper").addClass("shake").one("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",I)},I=function n(e){$(e.currentTarget).off("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",n),$(e.currentTarget).removeClass("shake")},v=function(n){n.find(".textWrapper").addClass("scale-0 ").one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",N)},N=function n(e){$(e.currentTarget).off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",n),T($(e.currentTarget).parent())},S=function(){_()};return e.init=function(){},e.startSpawn=function(){f()},e.stopSpawn=function(){c()},e.getQuestion=function(){return r()},e.getObject=function(){return s()},e.removeAnswer=function(n){T(n)},e.scaleAnswer=function(n){v(n)},e.shakeAnswer=function(n){E(n)},e.reset=function(){S()},e},daf_igra_01.TitleControl=function(){var n={};return n.init=function(){},n},daf_igra_01.GameControl=function(n){var e={},a=n.infoBar,t=n.spawnControl,i=n.feedbacView,o=n.particles,r=n.soundControl,_=void 0,d=void 0,s=function(){v(),f(),a.init(),a.setQuestion(t.getQuestion()),t.startSpawn(),c(),g(),p()},f=function n(){_=setTimeout(function(){a.setQuestion(t.getQuestion()),r.play("change"),n()},1e3*daf_igra_01.NEW_QUESTION_TIMER_IN_SECONDS)},c=function(){$("#gameView").on("click",m)},u=function(){$("#gameView").off("click",m)},g=function(){$(a).one("onEndOfTime",l)},p=function(){$(i).one("onFeedbackViewClicked",function(){s()})},l=function(){t.stopSpawn(),clearTimeout(_),i.init(a.getScore()),S()},m=function(n){if(d=$(n.target),!d.hasClass("view")){d.attr({"data-clickable":!1});var e=parseInt(d.attr("data-id"));T({answer:d,id:e})}},T=function(n){n.id===daf_igra_01.CURRENT_ID?E(n):I(n)},E=function(n){r.play("correct"),t.scaleAnswer(n.answer),a.incrementScore(),o.makeParticles({parent:n.answer,numberOfParticles:24,type:"sphere"})},I=function(n){r.play("wrong"),t.shakeAnswer(n.answer),a.decrementScore(),n.answer.attr({"data-clickable":""})},v=function(){$("#contentWrapper").prepend('<div id="gameView" class="view"></div>')},N=function(){u(),$("#contentWrapper #gameView").remove()},S=function(){N(),t.reset(),a.reset()};return e.init=function(){s()},e},daf_igra_01.SoundControl=function(){var n={},e=0,a=0,t=function(n){createjs.Sound.on("fileload",i),a=Object.keys(n).length;var e=!0,t=!1,o=void 0;try{for(var r,_=Object.keys(n)[Symbol.iterator]();!(e=(r=_.next()).done);e=!0){var d=r.value;createjs.Sound.registerSound("assets/audio/"+n[d]+".mp3",d)}}catch(n){t=!0,o=n}finally{try{!e&&_["return"]&&_["return"]()}finally{if(t)throw o}}},i=function(){e++,e===a&&(e=null,a=null,$(n).trigger("onAudioLoadComplete"))},o=function(n){var e=createjs.Sound.play(n);e.on("complete",r)},r=function e(a){a.target.off("complete",e),$(n).trigger("onAudioCompleted")};return n.init=function(n){t(n)},n.play=function(n){o(n)},n},daf_igra_01.Particles=function(n){var e={},a=n.parent||"body",t=n.numberOfParticles||1,i=n.duration||1,o=n.type||"sphere",r=["linear","ease","ease-in","ease-out"],_=function(n){a=n.parent||a,t=n.numberOfParticles||t,i=n.duration||i,o=n.type||o;for(var e=void 0,r=0;r<t;r++){var _='<div class="particle" data-type="'+o+'"></div>';e+=_}a.append(e),setTimeout(function(){d(a)},35)},d=function(n){var e=daf_igra_01.getRandomInRange(.35,.7),a=r[1];n.find(".particle").each(function(n,t){var i=daf_igra_01.getRandomIntInRange(-daf_igra_01.PARTICLE_MAX_OFFSET,daf_igra_01.PARTICLE_MAX_OFFSET),o=daf_igra_01.getRandomIntInRange(-daf_igra_01.PARTICLE_MAX_OFFSET,daf_igra_01.PARTICLE_MAX_OFFSET),r=daf_igra_01.getRandomIntInRange(0,720),_=daf_igra_01.getRandomInRange(.1,.2),d=daf_igra_01.getRandomIntInRange(60,255),s=daf_igra_01.getRandomIntInRange(60,255),f=daf_igra_01.getRandomIntInRange(60,255);$(t).css({"-webkit-transform":"translate("+i+"px, "+o+"px) rotate("+r+"deg) scale("+_+")","-moz-transform":"translate("+i+"px, "+o+"px) rotate("+r+"deg) scale("+_+")","-o-transform":"translate("+i+"px, "+o+"px) rotate("+r+"deg) scale("+_+")","-ms-transform":"translate("+i+"px, "+o+"px) rotate("+r+"deg) scale("+_+")",transform:"translate("+i+"px, "+o+"px) rotate("+r+"deg) scale("+_+")","-webkit-transition-duration":e+"s","transition-duration":e+"s","-webkit-transition-timing-function":a,"-moz-transition-timing-function":a,"-o-transition-timing-function":a,"transition-timing-function":a,"background-color":"rgb("+d+",  "+s+", "+f+")"})})};return e.init=function(){},e.makeParticles=function(n){_(n)},e},daf_igra_01.Controller=function(){var n={};return n.init=function(){},n},daf_igra_01.Bootstrap=function(){var n={},e=daf_igra_01.DataHandler(),a=daf_igra_01.SoundControl();$(a).on("onAudioLoadComplete",function(){d.init(),daf_igra_01.removePreloader()});var t=daf_igra_01.FeedbackView({data:e.getFeedbackData()});$(t).on("onFeedbackViewClicked",function(){});var i=daf_igra_01.InfoBar({data:e.getGameViewData()}),o=daf_igra_01.SpawnControl({data:e.getGameData()}),r=daf_igra_01.Particles({parent:"#contentWrapper",numberOfParticles:10,duration:1,type:"sphere"}),_=daf_igra_01.GameControl({infoBar:i,spawnControl:o,feedbacView:t,particles:r,soundControl:a}),d=daf_igra_01.TitleView({data:e.getTitleData()});return $(d).on("onTitleViewClicked",function(){_.init()}),a.init(e.getAudioData()),n.init=function(){},n},function(){function n(){FastClick.attach(document.body),d(),daf_igra_01.Bootstrap(),$(document).on("keypress",e)}function e(n){115===n.keyCode&&($(document).off("keypress",e),a())}function a(){$("#wrapper").prepend(v),c=$("#devView #gameTime"),u=$("#devView #questionTime"),g=$("#devView #spawnTime"),p=$("#devView #fallTime"),l=$("#devView #maxRotation"),m=$("#devView #spawnPercent"),T=$("#devView #pointsUp"),E=$("#devView #pointsDown"),I=$("#devView #fallMethod"),t()}function t(){_(),$("#devView form #submit").one("click",i),$("body").removeClass("loading")}function i(){$("#devView form #submit").off("click",i),o(),$("#devView").remove(),$(document).on("keypress",e)}function o(){daf_igra_01.GAME_TIME_IN_SECONDS=parseFloat(c[0].value),daf_igra_01.NEW_QUESTION_TIMER_IN_SECONDS=parseFloat(u[0].value),daf_igra_01.SPAWN_TIME_IN_SECONDS=parseFloat(g[0].value),daf_igra_01.ANSWER_FALL_TIME=parseFloat(p[0].value),daf_igra_01.MAX_ROTATION=parseFloat(l[0].value),daf_igra_01.CORRECT_ANSWER_POINTS=parseFloat(T[0].value),daf_igra_01.WRONG_ANSWER_POINTS=parseFloat(E[0].value),daf_igra_01.EASING_FUNCTION_TO_USE=I[0].value;var n=parseFloat(m[0].value);n=n>100?100:n,n=n<=0?-1:n,daf_igra_01.CORRECT_SPAWN_PERCENT=n,r()}function r(){Cookies.set("gameTime",daf_igra_01.GAME_TIME_IN_SECONDS),Cookies.set("questionTime",daf_igra_01.NEW_QUESTION_TIMER_IN_SECONDS),Cookies.set("spawnTime",daf_igra_01.SPAWN_TIME_IN_SECONDS),Cookies.set("fallTime",daf_igra_01.ANSWER_FALL_TIME),Cookies.set("maxRotation",daf_igra_01.MAX_ROTATION),Cookies.set("pointsUp",daf_igra_01.CORRECT_ANSWER_POINTS),Cookies.set("pointsDown",daf_igra_01.WRONG_ANSWER_POINTS),Cookies.set("fallMethod",daf_igra_01.EASING_FUNCTION_TO_USE),Cookies.set("spawnPercent",daf_igra_01.CORRECT_SPAWN_PERCENT)}function _(){void 0===Cookies.get("gameTime")||s()}function d(){void 0===Cookies.get("gameTime")||f()}function s(){c[0].value=Cookies.get("gameTime"),u[0].value=Cookies.get("questionTime"),g[0].value=Cookies.get("spawnTime"),p[0].value=Cookies.get("fallTime"),l[0].value=Cookies.get("maxRotation"),m[0].value=Cookies.get("spawnPercent"),T[0].value=Cookies.get("pointsUp"),E[0].value=Cookies.get("pointsDown"),I[0].value=Cookies.get("fallMethod")}function f(){daf_igra_01.GAME_TIME_IN_SECONDS=parseInt(Cookies.get("gameTime")),daf_igra_01.NEW_QUESTION_TIMER_IN_SECONDS=parseInt(Cookies.get("questionTime")),daf_igra_01.SPAWN_TIME_IN_SECONDS=parseFloat(Cookies.get("spawnTime")),daf_igra_01.ANSWER_FALL_TIME=parseInt(Cookies.get("fallTime")),daf_igra_01.MAX_ROTATION=parseInt(Cookies.get("maxRotation")),daf_igra_01.CORRECT_ANSWER_POINTS=parseInt(Cookies.get("pointsUp")),daf_igra_01.WRONG_ANSWER_POINTS=parseInt(Cookies.get("pointsDown")),daf_igra_01.EASING_FUNCTION_TO_USE=Cookies.get("fallMethod"),daf_igra_01.CORRECT_SPAWN_PERCENT=parseInt(Cookies.get("spawnPercent"))}$(document).one("i18nComplete",n);var c=void 0,u=void 0,g=void 0,p=void 0,l=void 0,m=void 0,T=void 0,E=void 0,I=void 0,v='\n  <div id="devView">\n          <form action="" method="get">\n            Game time  <input type="text" id="gameTime" name="" value="50"> (sec)\n            <br><br>\n            New question time  <input type="text" id="questionTime" name="" value="10"> (sec)\n            <br><br>\n            Answer spawn time  <input type="text" id="spawnTime" name="" value="1"> (sec)\n            <br><br>\n            Answer fall time  <input type="text" id="fallTime" name="" value="20"> (sec)\n            <br><br>\n            Answer max rotation  <input type="text" id="maxRotation" name="" value="20"> (deg)\n            <br><br>\n            Answer correct spawn %  <input type="text" id="spawnPercent" name="" value="50"> (%)\n            <br><br>\n\n            Points up for correct  <input type="text" id="pointsUp" name="" value="10">\n            <br><br>\n            Points down for wrong  <input type="text" id="pointsDown" name="" value="10">\n            <br><br>\n            Answer fall method <select id="fallMethod" name="fallMethod">\n                <option value="linear">linear</option>\n                <option value="ease">ease</option>\n                <option value="ease-out">ease-out</option>\n                <option value="ease-in">ease-in</option>\n              </select>\n              <br><br>\n            <p id="submit">Potrdi</p>\n          </form>\n        </div>\n        '}();