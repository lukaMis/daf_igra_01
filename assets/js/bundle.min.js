"use strict";var daf_igra_01={};daf_igra_01.CURRENT_ID=0,daf_igra_01.MAX_Y_POSITION=755,daf_igra_01.GAME_TIME_IN_SECONDS=50,daf_igra_01.NEW_QUESTION_TIMER_IN_SECONDS=10,daf_igra_01.SPAWN_TIME_IN_SECONDS=1,daf_igra_01.ANSWER_FALL_TIME=20,daf_igra_01.MAX_ROTATION=20,daf_igra_01.EASING_FUNCTION_TO_USE="linear",daf_igra_01.CORRECT_SPAWN_PERCENT=50,daf_igra_01.CORRECT_ANSWER_POINTS=10,daf_igra_01.WRONG_ANSWER_POINTS=10,daf_igra_01.getPercentChance=function(n){return!(Math.floor(100*Math.random())>n)},daf_igra_01.getRandomIntInRange=function(n,a){return Math.floor(Math.random()*(a-n+1))+n},daf_igra_01.removePreloader=function(){$("body").removeClass("loading")},daf_igra_01.DataHandler=function(){var n={};return n.init=function(){},n.getTitleData=function(){return i18n.t("titleView",{returnObjectTrees:!0})},n.getGameData=function(){return i18n.t("gameData",{returnObjectTrees:!0})},n.getFeedbackData=function(){return i18n.t("feedbackView",{returnObjectTrees:!0})},n.getGameViewData=function(){return i18n.t("gameView",{returnObjectTrees:!0})},n},daf_igra_01.TitleView=function(n){var a={};a.data=n.data;var t=function(){var n='\n    <div id="titleView" class="view">\n      <div class="viewContent">\n        <p class="annotation">'+a.data.text+'</p>\n        <div class="button">\n          <p>'+a.data.button+"</p>\n        </div>\n      </div>\n    </div>\n    ";$("#contentWrapper").append(n),$("#contentWrapper #titleView .button").one("click",e)},e=function(){$(a).trigger("onTitleViewClicked"),$("#contentWrapper #titleView").remove()};return a.init=function(){t()},a},daf_igra_01.FeedbackView=function(n){var a={},t=n.data,e=function(n){var a=t.text;a=a.replace("***","<span>"+n+"</span>");var e='\n    <div id="feedbackView" class="view">\n      <div class="viewContent">\n        <p class="annotation">'+a+'</p>\n        <div class="button">\n          <p>'+t.button+"</p>\n        </div>\n      </div>\n    </div>\n    ";$("#contentWrapper").append(e),$("#contentWrapper #feedbackView .button").one("click",i)},i=function(){$("#contentWrapper #feedbackView").remove(),$(a).trigger("onFeedbackViewClicked")};return a.init=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e(n)},a},daf_igra_01.InfoBar=function(n){var a={};a.data=n.data;var t=0,e=void 0,i=n.maxTime,r=function(){var n='\n      <div id="infoBar">\n        <p id="time">\n          <span id="m">00</span>:<span id="s">00</span>\n        </p>\n        <p id="question">QUESTION</p>\n        <p id="score"><span id="pointsInt">0</span> <span>'+a.data.points+"</span></p>\n      </div>\n      ";$("#contentWrapper").append(n)},o=function(n){document.getElementById("question").innerHTML=n},_=function(n){document.querySelector("#score #pointsInt").innerHTML=n},d=function(){var n=parseInt(document.querySelector("#score #pointsInt").innerHTML);n+=daf_igra_01.CORRECT_ANSWER_POINTS,_(n)},f=function(){var n=parseInt(document.querySelector("#score #pointsInt").innerHTML);n-=daf_igra_01.WRONG_ANSWER_POINTS,_(n)},c=function(){return parseInt(document.querySelector("#score #pointsInt").innerHTML)},s=function(){e=setInterval(function(){u()},1e3),u()},u=function(){t<i+1?(p(t),t++):(g(),$(a).trigger("onEndOfTime"))},g=function(){clearInterval(e),t=0},p=function(n){var a=(i-n)%60,t=Math.floor((i-n)/60);a="0"+a;var e=a.slice(-2);t="0"+t;var r=t.slice(-2),o='<span id="m">'+r+'</span>:<span id="s">'+e+"</span>";document.getElementById("time").innerHTML=o},T=function(){t=0,_(t),$("#contentWrapper #infoBar").remove()};return a.init=function(){r(),s()},a.setQuestion=function(n){o(n)},a.incrementScore=function(){d()},a.decrementScore=function(){f()},a.getScore=function(){return c()},a.reset=function(){T()},a},daf_igra_01.SpawnControl=function(n){var a={},t=n.data,e=[],i=[],r=void 0,o=function(){return _(),daf_igra_01.CURRENT_ID=daf_igra_01.getRandomIntInRange(0,t.length-1),d(),t[daf_igra_01.CURRENT_ID].question},_=function(){e.length=0,i.length=0},d=function(){for(var n=0;n<t[daf_igra_01.CURRENT_ID].answers.length;n++)e.push(t[daf_igra_01.CURRENT_ID].answers[n]);for(var a=0;a<t.length;a++)if(a!==daf_igra_01.CURRENT_ID)for(var r=0;r<t[a].answers.length;r++)i.push(t[a].answers[r])},f=function(){},c=function(){r=setInterval(function(){g()},1e3*daf_igra_01.SPAWN_TIME_IN_SECONDS),g()},s=function(){clearInterval(r),u()},u=function(){$("#gameView .answer").each(function(n,a){l($(a))})},g=function(){var n="",t=0;daf_igra_01.getPercentChance(daf_igra_01.CORRECT_SPAWN_PERCENT)?(n=e[daf_igra_01.getRandomIntInRange(0,e.length-1)],t=daf_igra_01.CURRENT_ID):(n=i[daf_igra_01.getRandomIntInRange(0,i.length-1)],t=daf_igra_01.CURRENT_ID+1),$(a).trigger("onSpawn",{spawn:n});var r='\n    <div class="answer" data-id="'+t+'">\n      <div class="textWrapper">\n        <p>'+n+"</p>\n      </div>\n    </div>\n    ";$("#gameView").append(r),p()},p=function(){var n=$("#gameView .answer").length,a=$($("#gameView .answer")[n-1]),t=a.outerWidth(),e=20,i=1024-t-e,r=void 0,o=0,_=daf_igra_01.getRandomIntInRange(-daf_igra_01.MAX_ROTATION,daf_igra_01.MAX_ROTATION),d=daf_igra_01.getRandomIntInRange(-daf_igra_01.MAX_ROTATION,daf_igra_01.MAX_ROTATION);d=20,i<0?(i=0,r=0):r=daf_igra_01.getRandomIntInRange(e,i),a.css({left:r,top:d,"-webkit-transform":"translate("+o+"px, "+daf_igra_01.MAX_Y_POSITION+"px) rotate("+_+"deg)","-moz-transform":"translate("+o+"px, "+daf_igra_01.MAX_Y_POSITION+"px) rotate("+_+"deg)","-o-transform":"translate("+o+"px, "+daf_igra_01.MAX_Y_POSITION+"px) rotate("+_+"deg)","-ms-transform":"translate("+o+"px, "+daf_igra_01.MAX_Y_POSITION+"px) rotate("+_+"deg)",transform:"translate("+o+"px, "+daf_igra_01.MAX_Y_POSITION+"px) rotate("+_+"deg)","-webkit-transition-duration":daf_igra_01.ANSWER_FALL_TIME+"s","transition-duration":daf_igra_01.ANSWER_FALL_TIME+"s","-webkit-transition-timing-function":daf_igra_01.EASING_FUNCTION_TO_USE,"-moz-transition-timing-function":daf_igra_01.EASING_FUNCTION_TO_USE,"-o-transition-timing-function":daf_igra_01.EASING_FUNCTION_TO_USE,"transition-timing-function":daf_igra_01.EASING_FUNCTION_TO_USE}),a.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",T)},T=function(n){l($(n.target))},l=function(n){n.off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",T),n.remove()},I=function(n){n.find(".textWrapper").addClass("shake").one("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",v)},v=function n(a){$(a.currentTarget).off("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",n),$(a.currentTarget).removeClass("shake")},E=function(n){n.find(".textWrapper").addClass("scale-0 ").one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",m)},m=function n(a){$(a.currentTarget).off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",n),l($(a.currentTarget).parent())},N=function(){_()};return a.init=function(){},a.startSpawn=function(){c()},a.stopSpawn=function(){s()},a.getQuestion=function(){return o()},a.getObject=function(){return f()},a.removeAnswer=function(n){l(n)},a.scaleAnswer=function(n){E(n)},a.shakeAnswer=function(n){I(n)},a.reset=function(){N()},a},daf_igra_01.TitleControl=function(){var n={};return n.init=function(){},n},daf_igra_01.GameControl=function(n){var a={},t=n.infoBar,e=n.spawnControl,i=n.feedbacView,r=void 0,o=function(){l(),r=setInterval(function(){t.setQuestion(e.getQuestion())},1e3*daf_igra_01.NEW_QUESTION_TIMER_IN_SECONDS),t.init(),t.setQuestion(e.getQuestion()),e.startSpawn(),_(),f(),c()},_=function(){$("#gameView").on("click",u)},d=function(){$("#gameView").off("click",u)},f=function(){$(t).one("onEndOfTime",s)},c=function(){$(i).one("onFeedbackViewClicked",function(){o()})},s=function(){e.stopSpawn(),clearInterval(r),i.init(t.getScore()),v()},u=function(n){var a=$(n.target);if(!a.hasClass("view")){var t=parseInt(a.attr("data-id"));g({answer:a,id:t})}},g=function(n){n.id===daf_igra_01.CURRENT_ID?p(n):T(n)},p=function(n){e.scaleAnswer(n.answer),t.incrementScore()},T=function(n){e.shakeAnswer(n.answer),t.decrementScore()},l=function(){$("#contentWrapper").prepend('<div id="gameView" class="view"></div>')},I=function(){d(),$("#contentWrapper #gameView").remove()},v=function(){I(),e.reset(),t.reset()};return a.init=function(){o()},a},daf_igra_01.Controller=function(){var n={};return n.init=function(){},n},daf_igra_01.Bootstrap=function(){var n={},a=daf_igra_01.DataHandler(),t=daf_igra_01.FeedbackView({data:a.getFeedbackData()});$(t).on("onFeedbackViewClicked",function(){});var e=daf_igra_01.InfoBar({data:a.getGameViewData(),maxTime:daf_igra_01.GAME_TIME_IN_SECONDS}),i=daf_igra_01.SpawnControl({data:a.getGameData()}),r=daf_igra_01.GameControl({infoBar:e,spawnControl:i,feedbacView:t}),o=daf_igra_01.TitleView({data:a.getTitleData()});return $(o).on("onTitleViewClicked",function(){daf_igra_01.removePreloader(),r.init()}),o.init(),n.init=function(){},n},function(){function n(){FastClick.attach(document.body),a()}function a(){r(),$("#devView form #submit").one("click",t),$("body").removeClass("loading")}function t(){$("#devView form #submit").off("click",t),e(),$("#devView").remove(),daf_igra_01.Bootstrap()}function e(){daf_igra_01.GAME_TIME_IN_SECONDS=parseFloat(_[0].value),daf_igra_01.NEW_QUESTION_TIMER_IN_SECONDS=parseFloat(d[0].value),daf_igra_01.SPAWN_TIME_IN_SECONDS=parseFloat(f[0].value),daf_igra_01.ANSWER_FALL_TIME=parseFloat(c[0].value),daf_igra_01.MAX_ROTATION=parseFloat(s[0].value),daf_igra_01.CORRECT_ANSWER_POINTS=parseFloat(g[0].value),daf_igra_01.WRONG_ANSWER_POINTS=parseFloat(p[0].value),daf_igra_01.EASING_FUNCTION_TO_USE=T[0].value;var n=parseFloat(u[0].value);n=n>100?100:n,n=n<=0?-1:n,daf_igra_01.CORRECT_SPAWN_PERCENT=n,i()}function i(){Cookies.set("gameTime",daf_igra_01.GAME_TIME_IN_SECONDS),Cookies.set("questionTime",daf_igra_01.NEW_QUESTION_TIMER_IN_SECONDS),Cookies.set("spawnTime",daf_igra_01.SPAWN_TIME_IN_SECONDS),Cookies.set("fallTime",daf_igra_01.ANSWER_FALL_TIME),Cookies.set("maxRotation",daf_igra_01.MAX_ROTATION),Cookies.set("pointsUp",daf_igra_01.CORRECT_ANSWER_POINTS),Cookies.set("pointsDown",daf_igra_01.WRONG_ANSWER_POINTS),Cookies.set("fallMethod",daf_igra_01.EASING_FUNCTION_TO_USE),Cookies.set("spawnPercent",daf_igra_01.CORRECT_SPAWN_PERCENT)}function r(){void 0===Cookies.get("gameTime")||o()}function o(){_[0].value=Cookies.get("gameTime"),d[0].value=Cookies.get("questionTime"),f[0].value=Cookies.get("spawnTime"),c[0].value=Cookies.get("fallTime"),s[0].value=Cookies.get("maxRotation"),u[0].value=Cookies.get("spawnPercent"),g[0].value=Cookies.get("pointsUp"),p[0].value=Cookies.get("pointsDown"),T[0].value=Cookies.get("fallMethod")}$(document).one("i18nComplete",n);var _=$("#devView #gameTime"),d=$("#devView #questionTime"),f=$("#devView #spawnTime"),c=$("#devView #fallTime"),s=$("#devView #maxRotation"),u=$("#devView #spawnPercent"),g=$("#devView #pointsUp"),p=$("#devView #pointsDown"),T=$("#devView #fallMethod")}();