"use strict";var daf_igra_01={};daf_igra_01.CURRENT_ID=0,daf_igra_01.GAME_TIME_IN_SECONDS=35,daf_igra_01.SPAWN_TIME_IN_SECONDS=.5,daf_igra_01.NEW_QUESTION_TIMER_IN_SECONDS=10,daf_igra_01.ANSWER_FALL_TIME=20,daf_igra_01.MAX_ROTATION=20,daf_igra_01.EASING_FUNCTION_TO_USE="linear",daf_igra_01.CORRECT_SPAWN_PERCENT=50,daf_igra_01.CORRECT_ANSWER_POINTS=10,daf_igra_01.WRONG_ANSWER_POINTS=5,daf_igra_01.getPercentChance=function(n){return!(Math.floor(100*Math.random())>n)},daf_igra_01.getRandomIntInRange=function(n,t){return Math.floor(Math.random()*(t-n+1))+n},daf_igra_01.removePreloader=function(){$("body").removeClass("loading")},daf_igra_01.DataHandler=function(){var n={};return n.init=function(){},n.getTitleData=function(){return i18n.t("titleView",{returnObjectTrees:!0})},n.getGameData=function(){return i18n.t("gameData",{returnObjectTrees:!0})},n.getFeedbackData=function(){return i18n.t("feedbackView",{returnObjectTrees:!0})},n.getGameViewData=function(){return i18n.t("gameView",{returnObjectTrees:!0})},n},daf_igra_01.TitleView=function(n){var t={};t.data=n.data;var a=function(){var n='\n    <div id="titleView" class="view">\n      <div class="viewContent">\n        <p class="annotation">'+t.data.text+'</p>\n        <div class="button">\n          <p>'+t.data.button+"</p>\n        </div>\n      </div>\n    </div>\n    ";$("#contentWrapper").append(n),$("#contentWrapper #titleView .button").one("click",e)},e=function(){$(t).trigger("onTitleViewClicked"),$("#contentWrapper #titleView").remove()};return t.init=function(){a()},t},daf_igra_01.FeedbackView=function(n){var t={};t.data=n.data;var a=function(n){t.data.text=t.data.text.replace("***","<span>"+n+"</span>");var a='\n    <div id="feedbackView" class="view">\n      <div class="viewContent">\n        <p class="annotation">'+t.data.text+'</p>\n        <div class="button">\n          <p>'+t.data.button+"</p>\n        </div>\n      </div>\n    </div>\n    ";$("#contentWrapper").append(a),$("#contentWrapper #feedbackView .button").one("click",e)},e=function(){$(t).trigger("onFeedbackViewClicked"),$("#contentWrapper #feedbackView").remove()};return t.init=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;a(n)},t},daf_igra_01.InfoBar=function(n){var t={};t.data=n.data;var a=0,e=void 0,i=n.maxTime,r=function(){var n='\n      <div id="infoBar">\n        <p id="time">\n          <span id="m">00</span>:<span id="s">00</span>\n        </p>\n        <p id="question">QUESTION</p>\n        <p id="score"><span id="pointsInt">0</span> <span>'+t.data.points+"</span></p>\n      </div>\n      ";$("#contentWrapper").append(n)},o=function(n){document.getElementById("question").innerHTML=n},d=function(n){document.querySelector("#score #pointsInt").innerHTML=n},c=function(){f(),e=setInterval(function(){f()},1e3)},f=function(){a===i+1?_():u(a),a++},_=function(){clearInterval(e),a=0},u=function(n){var t=(i-n)%60,a=Math.floor((i-n)/60);t="0"+t;var e=t.slice(-2);a="0"+a;var r=a.slice(-2),o='<span id="m">'+r+'</span>:<span id="s">'+e+"</span>";document.getElementById("time").innerHTML=o};return t.init=function(){r(),c()},t.setQuestion=function(n){o(n)},t.setScore=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;d(n)},t},daf_igra_01.SpawnControl=function(n){var t={},a=n.data,e=[],i=[],r=0,o=void 0,d=function(){return c(),daf_igra_01.CURRENT_ID=daf_igra_01.getRandomIntInRange(0,a.length-1),f(),r++,a[daf_igra_01.CURRENT_ID].question},c=function(){e.length=0,i.length=0},f=function(){for(var n=0;n<a[daf_igra_01.CURRENT_ID].answers.length;n++)e.push(a[daf_igra_01.CURRENT_ID].answers[n]);for(var t=0;t<a.length;t++)if(t!==daf_igra_01.CURRENT_ID)for(var r=0;r<a[t].answers.length;r++)i.push(a[t].answers[r])},_=function(){},u=function(){o=setInterval(function(){s()},1e3*daf_igra_01.SPAWN_TIME_IN_SECONDS),s()},s=function(){var n="",a=0;daf_igra_01.getPercentChance(daf_igra_01.CORRECT_SPAWN_PERCENT)?(n=e[daf_igra_01.getRandomIntInRange(0,e.length-1)],a=daf_igra_01.CURRENT_ID):(n=i[daf_igra_01.getRandomIntInRange(0,i.length-1)],a=daf_igra_01.CURRENT_ID+1),$(t).trigger("onSpawn",{spawn:n});var r='\n    <div class="answer" data-id="'+a+'">\n      <div class="textWrapper">\n        <p>'+n+"</p>\n      </div>\n    </div>\n    ";$("#gameView").append(r),g()},g=function(){var n=$("#gameView .answer").length,t=$($("#gameView .answer")[n-1]),a=t.outerWidth(),e=20,i=1024-a-e,r=void 0,o=0,d=1e3,c=daf_igra_01.getRandomIntInRange(-daf_igra_01.MAX_ROTATION,daf_igra_01.MAX_ROTATION),f=daf_igra_01.getRandomIntInRange(-daf_igra_01.MAX_ROTATION,daf_igra_01.MAX_ROTATION);f=20,i<0?(i=0,r=0):r=daf_igra_01.getRandomIntInRange(e,i),t.css({left:r,top:f,"-webkit-transform":"translate("+o+"px, "+d+"px) rotate("+c+"deg)","-moz-transform":"translate("+o+"px, "+d+"px) rotate("+c+"deg)","-o-transform":"translate("+o+"px, "+d+"px) rotate("+c+"deg)","-ms-transform":"translate("+o+"px, "+d+"px) rotate("+c+"deg)",transform:"translate("+o+"px, "+d+"px) rotate("+c+"deg)","-webkit-transition-duration":daf_igra_01.ANSWER_FALL_TIME+"s","transition-duration":daf_igra_01.ANSWER_FALL_TIME+"s","-webkit-transition-timing-function":daf_igra_01.EASING_FUNCTION_TO_USE,"-moz-transition-timing-function":daf_igra_01.EASING_FUNCTION_TO_USE,"-o-transition-timing-function":daf_igra_01.EASING_FUNCTION_TO_USE,"transition-timing-function":daf_igra_01.EASING_FUNCTION_TO_USE}),t.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",p)},p=function(n){$(n.target).remove()};return t.init=function(){},t.startSpawn=function(){u()},t.getQuestion=function(){return d()},t.getObject=function(){return _()},t},daf_igra_01.TitleControl=function(){var n={};return n.init=function(){},n},daf_igra_01.GameControl=function(n){var t={},a=n.infoBar,e=n.spawnControl,i=(n.feedbacView,void 0),r=function(){$("#contentWrapper").prepend('<div id="gameView" class="view"></div>'),i=setInterval(function(){a.setQuestion(e.getQuestion())},1e3*daf_igra_01.NEW_QUESTION_TIMER_IN_SECONDS),a.setQuestion(e.getQuestion()),e.startSpawn(),o()},o=function(){$("#gameView").on("click",d)},d=function(n){var t=$(n.target);if(!t.hasClass("view")){var a=parseInt(t.attr("data-id"));c({answer:t,id:a})}},c=function(n){n.id===daf_igra_01.CURRENT_ID};return t.init=function(){r()},t},daf_igra_01.Controller=function(){var n={};return n.init=function(){},n},daf_igra_01.Bootstrap=function(){var n={},t=daf_igra_01.DataHandler(),a=daf_igra_01.FeedbackView({data:t.getFeedbackData()});$(a).on("onFeedbackViewClicked",function(){});var e=daf_igra_01.InfoBar({data:t.getGameViewData(),maxTime:daf_igra_01.GAME_TIME_IN_SECONDS});e.init();var i=daf_igra_01.SpawnControl({data:t.getGameData()}),r=daf_igra_01.GameControl({infoBar:e,spawnControl:i,feedbacView:a});r.init(),daf_igra_01.removePreloader();var o=daf_igra_01.TitleView({data:t.getTitleData()});return $(o).on("onTitleViewClicked",function(){daf_igra_01.removePreloader()}),n.init=function(){},n},function(){function n(){FastClick.attach(document.body),daf_igra_01.Bootstrap()}$(document).one("i18nComplete",n)}();