"use strict";var daf_igra_01={};daf_igra_01.CURRENT_ID=0,daf_igra_01.MAX_Y_POSITION=755,daf_igra_01.PARTICLE_MAX_OFFSET=150,daf_igra_01.AUDIO_IS_MUTED=!1,daf_igra_01.GAME_TIME_IN_SECONDS=600,daf_igra_01.NEW_QUESTION_TIMER_IN_SECONDS=10,daf_igra_01.SPAWN_TIME_IN_SECONDS=1.35,daf_igra_01.ANSWER_FALL_TIME=20,daf_igra_01.MAX_ROTATION=20,daf_igra_01.CORRECT_SPAWN_PERCENT=50,daf_igra_01.CORRECT_ANSWER_POINTS=10,daf_igra_01.WRONG_ANSWER_POINTS=10,daf_igra_01.EASING_FUNCTION_TO_USE="linear",daf_igra_01.getPercentChance=function(n){return!(Math.floor(100*Math.random())>n)},daf_igra_01.getRandomIntInRange=function(n,t){return Math.floor(Math.random()*(t-n+1))+n},daf_igra_01.getRandomInRange=function(n,t){return Math.random()*(t-n)+n},daf_igra_01.removePreloader=function(){$("body").removeClass("loading")},daf_igra_01.DataHandler=function(){var n={};return n.init=function(){},n.getTitleData=function(){return i18n.t("titleView",{returnObjectTrees:!0})},n.getGameData=function(){return i18n.t("gameData",{returnObjectTrees:!0})},n.getFeedbackData=function(){return i18n.t("feedbackView",{returnObjectTrees:!0})},n.getGameViewData=function(){return i18n.t("gameView",{returnObjectTrees:!0})},n.getAudioData=function(){return i18n.t("audioData",{returnObjectTrees:!0})},n},daf_igra_01.TitleView=function(n){var t={};t.data=n.data;var a=function(){var n='\n    <div id="titleView" class="view">\n      <div class="viewContent">\n        <p class="annotation">'+t.data.text+'</p>\n        <div class="button">\n          <p>'+t.data.button+"</p>\n        </div>\n      </div>\n    </div>\n    ";$("#contentWrapper").append(n),$("#contentWrapper #titleView .button").one("click",e)},e=function(){$(t).trigger("onTitleViewClicked"),$("#contentWrapper #titleView").remove()};return t.init=function(){a()},t},daf_igra_01.FeedbackView=function(n){var t={},a=n.data,e=function(n){var t=a.text;t=t.replace("***","<span>"+n+"</span>");var e='\n    <div id="feedbackView" class="view">\n      <div class="viewContent">\n        <p class="annotation">'+t+'</p>\n        <div class="button">\n          <p>'+a.button+"</p>\n        </div>\n      </div>\n    </div>\n    ";$("#contentWrapper").append(e),$("#contentWrapper #feedbackView .button").one("click",i)},i=function(){$("#contentWrapper #feedbackView").remove(),$(t).trigger("onFeedbackViewClicked")};return t.init=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e(n)},t},daf_igra_01.InfoBar=function(n){var t={},a=n.data,e=0,i=void 0,r=0,o=function(){var n='\n      <div id="infoBar">\n        <p id="time">\n          <span id="m">00</span>:<span id="s">00</span>\n        </p>\n        <div id="muteButton" data-mute="'+daf_igra_01.AUDIO_IS_MUTED+'"></div>\n        <p id="question">QUESTION</p>\n        <p id="score"><span id="pointsInt">0</span> <span>'+a.points+"</span></p>\n      </div>\n      ";$("#contentWrapper").append(n),setTimeout(function(){T()},50)},_=function(n){document.getElementById("question").innerHTML=n},d=function(n){$("#score #pointsInt").text(n.score).attr({"data-increment":"","data-score":n.increment?daf_igra_01.CORRECT_ANSWER_POINTS:daf_igra_01.WRONG_ANSWER_POINTS}),setTimeout(function(){$("#score #pointsInt").attr({"data-increment":!!n.increment})},50)},f=function(){r+=daf_igra_01.CORRECT_ANSWER_POINTS,d({score:r,increment:!0})},c=function(){r-=daf_igra_01.WRONG_ANSWER_POINTS,r=r<0?0:r,d({score:r,decrement:!0})},s=function(){return r},u=function(){i=setInterval(function(){g()},1e3),g()},g=function(){e<daf_igra_01.GAME_TIME_IN_SECONDS+1?(l(e),e++):(p(),$(t).trigger("onEndOfTime"))},p=function(){clearInterval(i),e=0},l=function(n){var t=(daf_igra_01.GAME_TIME_IN_SECONDS-n)%60,a=Math.floor((daf_igra_01.GAME_TIME_IN_SECONDS-n)/60);t="0"+t;var e=t.slice(-2);a="0"+a;var i=a.slice(-2),r='<span id="m">'+i+'</span>:<span id="s">'+e+"</span>";document.getElementById("time").innerHTML=r},m=function(){daf_igra_01.AUDIO_IS_MUTED=!daf_igra_01.AUDIO_IS_MUTED,$(t).trigger("onAudioMute",{muteAudio:daf_igra_01.AUDIO_IS_MUTED}),$("#muteButton").attr({"data-mute":daf_igra_01.AUDIO_IS_MUTED})},T=function(){$("#muteButton").on("click",m)},I=function(){$("#muteButton").off("click",m)},E=function(){e=0,r=0,I(),d({score:r}),$("#contentWrapper #infoBar").remove()};return t.init=function(){o(),u()},t.setQuestion=function(n){_(n)},t.incrementScore=function(){f()},t.decrementScore=function(){c()},t.getScore=function(){return s()},t.reset=function(){E()},t},daf_igra_01.SpawnControl=function(n){var t={},a=n.data,e=[],i=[],r=void 0,o=function(){return _(),daf_igra_01.CURRENT_ID=daf_igra_01.getRandomIntInRange(0,a.length-1),d(),a[daf_igra_01.CURRENT_ID].question},_=function(){e.length=0,i.length=0},d=function(){for(var n=0;n<a[daf_igra_01.CURRENT_ID].answers.length;n++)e.push(a[daf_igra_01.CURRENT_ID].answers[n]);for(var t=0;t<a.length;t++)if(t!==daf_igra_01.CURRENT_ID)for(var r=0;r<a[t].answers.length;r++)i.push(a[t].answers[r])},f=function(){return a[daf_igra_01.CURRENT_ID].answers},c=function(){g()},s=function(){clearTimeout(r),u()},u=function(){$("#gameView .answer").each(function(n,t){m($(t))})},g=function n(){var a="",o=0;daf_igra_01.getPercentChance(daf_igra_01.CORRECT_SPAWN_PERCENT)?(a=e[daf_igra_01.getRandomIntInRange(0,e.length-1)],o=daf_igra_01.CURRENT_ID):(a=i[daf_igra_01.getRandomIntInRange(0,i.length-1)],o=daf_igra_01.CURRENT_ID+1),$(t).trigger("onSpawn",{spawn:a});var _=daf_igra_01.getRandomIntInRange(10,1014-20*a.length),d='\n    <div class="answer" data-id="'+o+'" style="left: '+_+'px; top: 25px;">\n      <div class="textWrapper">\n        <p>'+a+"</p>\n      </div>\n    </div>\n    ";$("#gameView").append(d),setTimeout(function(){p()},30),r=setTimeout(function(){n()},1e3*daf_igra_01.SPAWN_TIME_IN_SECONDS)},p=function(){var n=$("#gameView .answer").length,t=$($("#gameView .answer")[n-1]),a=0,e=daf_igra_01.getRandomIntInRange(-daf_igra_01.MAX_ROTATION,daf_igra_01.MAX_ROTATION);t.css({"-webkit-transform":"translate("+a+"px, "+daf_igra_01.MAX_Y_POSITION+"px) rotate("+e+"deg)","-moz-transform":"translate("+a+"px, "+daf_igra_01.MAX_Y_POSITION+"px) rotate("+e+"deg)","-o-transform":"translate("+a+"px, "+daf_igra_01.MAX_Y_POSITION+"px) rotate("+e+"deg)","-ms-transform":"translate("+a+"px, "+daf_igra_01.MAX_Y_POSITION+"px) rotate("+e+"deg)",transform:"translate("+a+"px, "+daf_igra_01.MAX_Y_POSITION+"px) rotate("+e+"deg)","-webkit-transition-duration":daf_igra_01.ANSWER_FALL_TIME+"s","transition-duration":daf_igra_01.ANSWER_FALL_TIME+"s","-webkit-transition-timing-function":daf_igra_01.EASING_FUNCTION_TO_USE,"-moz-transition-timing-function":daf_igra_01.EASING_FUNCTION_TO_USE,"-o-transition-timing-function":daf_igra_01.EASING_FUNCTION_TO_USE,"transition-timing-function":daf_igra_01.EASING_FUNCTION_TO_USE}),t.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",l)},l=function(n){m($(n.target))},m=function(n){n.off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",l),n.remove()},T=function(n){n.find(".textWrapper").addClass("shake").one("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",I)},I=function n(t){$(t.currentTarget).off("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",n),$(t.currentTarget).removeClass("shake")},E=function(n){n.find(".textWrapper").addClass("scale-0 ").one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",S)},S=function n(t){$(t.currentTarget).off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",n),m($(t.currentTarget).parent())},v=function(){_()};return t.init=function(){},t.startSpawn=function(){c()},t.stopSpawn=function(){s()},t.getQuestion=function(){return o()},t.getCorrectAnswersArray=function(){return f()},t.removeAnswer=function(n){m(n)},t.scaleAnswer=function(n){E(n)},t.shakeAnswer=function(n){T(n)},t.reset=function(){v()},t},daf_igra_01.GameControl=function(n){var t={},a=n.infoBar,e=n.spawnControl,i=n.feedbacView,r=n.particles,o=n.soundControl,_=void 0,d=void 0,f=function(){R(),c(),a.init(),a.setQuestion(e.getQuestion()),e.startSpawn(),s(),g(),l(),m()},c=function n(){_=setTimeout(function(){a.setQuestion(e.getQuestion()),o.play("change"),n()},1e3*daf_igra_01.NEW_QUESTION_TIMER_IN_SECONDS)},s=function(){$("#gameView").on("click",E)},u=function(){$("#gameView").off("click",E)},g=function(){$(a).on("onAudioMute",T)},p=function(){$(a).off("onAudioMute",T)},l=function(){$(a).one("onEndOfTime",I)},m=function(){$(i).one("onFeedbackViewClicked",function(){f()})},T=function(n,t){o.muteAudio(t.muteAudio)},I=function(){e.stopSpawn(),p(),clearTimeout(_),i.init(a.getScore()),A()},E=function(n){if(d=$(n.target),!d.hasClass("view")){d.attr({"data-clickable":!1});var t=parseInt(d.attr("data-id")),a=d.find(".textWrapper p").text();S({answer:d,id:t,text:a})}},S=function(n){e.getCorrectAnswersArray().indexOf(n.text)===-1?N(n):v(n)},v=function(n){e.scaleAnswer(n.answer),a.incrementScore(),r.makeParticles({parent:n.answer,numberOfParticles:24,type:"sphere"})},N=function(n){e.shakeAnswer(n.answer),a.decrementScore(),n.answer.attr({"data-clickable":""})},R=function(){$("#contentWrapper").prepend('<div id="gameView" class="view"></div>')},w=function(){u(),$("#contentWrapper #gameView").remove()},A=function(){w(),e.reset(),a.reset()};return t.init=function(){f()},t},daf_igra_01.SoundControl=function(){var n={},t=0,a=0,e=function(n){createjs.Sound.on("fileload",i),a=Object.keys(n).length;var t=!0,e=!1,r=void 0;try{for(var o,_=Object.keys(n)[Symbol.iterator]();!(t=(o=_.next()).done);t=!0){var d=o.value;createjs.Sound.registerSound("assets/audio/"+n[d]+".mp3",d)}}catch(n){e=!0,r=n}finally{try{!t&&_["return"]&&_["return"]()}finally{if(e)throw r}}},i=function(){t++,t===a&&(t=null,a=null,$(n).trigger("onAudioLoadComplete"))},r=function(n){var t=createjs.Sound.play(n);t.on("complete",o)},o=function t(a){a.target.off("complete",t),$(n).trigger("onAudioCompleted")},_=function(n){createjs.Sound.muted=n};return n.init=function(n){e(n)},n.play=function(n){r(n)},n.muteAudio=function(n){_(n)},n},daf_igra_01.Particles=function(n){var t={},a=n.parent||"body",e=n.numberOfParticles||1,i=n.duration||1,r=n.type||"sphere",o=["linear","ease","ease-in","ease-out"],_=function(n){a=n.parent||a,e=n.numberOfParticles||e,i=n.duration||i,r=n.type||r;for(var t="",o=0;o<e;o++){var _='<div class="particle" data-type="'+r+'"></div>';t+=_}a.append(t),setTimeout(function(){d(a)},35)},d=function(n){var t=daf_igra_01.getRandomInRange(.35,.7),a=o[1];n.find(".particle").each(function(n,e){var i=daf_igra_01.getRandomIntInRange(-daf_igra_01.PARTICLE_MAX_OFFSET,daf_igra_01.PARTICLE_MAX_OFFSET),r=daf_igra_01.getRandomIntInRange(-daf_igra_01.PARTICLE_MAX_OFFSET,daf_igra_01.PARTICLE_MAX_OFFSET),o=daf_igra_01.getRandomIntInRange(0,720),_=daf_igra_01.getRandomInRange(.1,.2),d=daf_igra_01.getRandomIntInRange(60,255),f=daf_igra_01.getRandomIntInRange(60,255),c=daf_igra_01.getRandomIntInRange(60,255);$(e).css({"-webkit-transform":"translate("+i+"px, "+r+"px) rotate("+o+"deg) scale("+_+")","-moz-transform":"translate("+i+"px, "+r+"px) rotate("+o+"deg) scale("+_+")","-o-transform":"translate("+i+"px, "+r+"px) rotate("+o+"deg) scale("+_+")","-ms-transform":"translate("+i+"px, "+r+"px) rotate("+o+"deg) scale("+_+")",transform:"translate("+i+"px, "+r+"px) rotate("+o+"deg) scale("+_+")","-webkit-transition-duration":t+"s","transition-duration":t+"s","-webkit-transition-timing-function":a,"-moz-transition-timing-function":a,"-o-transition-timing-function":a,"transition-timing-function":a,"background-color":"rgb("+d+",  "+f+", "+c+")"})})};return t.init=function(){},t.makeParticles=function(n){_(n)},t},daf_igra_01.Bootstrap=function(){var n={},t=daf_igra_01.DataHandler(),a=daf_igra_01.SoundControl();$(a).on("onAudioLoadComplete",function(){d.init(),daf_igra_01.removePreloader()});var e=daf_igra_01.FeedbackView({data:t.getFeedbackData()}),i=daf_igra_01.InfoBar({data:t.getGameViewData()}),r=daf_igra_01.SpawnControl({data:t.getGameData()}),o=daf_igra_01.Particles({parent:"#contentWrapper",numberOfParticles:10,duration:1,type:"sphere"}),_=daf_igra_01.GameControl({infoBar:i,spawnControl:r,feedbacView:e,particles:o,soundControl:a}),d=daf_igra_01.TitleView({data:t.getTitleData()});return $(d).on("onTitleViewClicked",function(){_.init()}),a.init(t.getAudioData()),n.init=function(){},n},function(){function n(){FastClick.attach(document.body),daf_igra_01.Bootstrap()}$(document).one("i18nComplete",n)}();