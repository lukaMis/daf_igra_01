"use strict";var daf_igra_01={};daf_igra_01.CURRENT_ID=0,daf_igra_01.MAX_Y_POSITION=755,daf_igra_01.PARTICLE_MAX_OFFSET=150,daf_igra_01.GAME_TIME_IN_SECONDS=50,daf_igra_01.NEW_QUESTION_TIMER_IN_SECONDS=10,daf_igra_01.SPAWN_TIME_IN_SECONDS=1,daf_igra_01.ANSWER_FALL_TIME=20,daf_igra_01.MAX_ROTATION=20,daf_igra_01.EASING_FUNCTION_TO_USE="linear",daf_igra_01.CORRECT_SPAWN_PERCENT=50,daf_igra_01.CORRECT_ANSWER_POINTS=10,daf_igra_01.WRONG_ANSWER_POINTS=10,daf_igra_01.getPercentChance=function(n){return!(Math.floor(100*Math.random())>n)},daf_igra_01.getRandomIntInRange=function(n,e){return Math.floor(Math.random()*(e-n+1))+n},daf_igra_01.getRandomInRange=function(n,e){return Math.random()*(e-n)+n},daf_igra_01.removePreloader=function(){$("body").removeClass("loading")},daf_igra_01.DataHandler=function(){var n={};return n.init=function(){},n.getTitleData=function(){return i18n.t("titleView",{returnObjectTrees:!0})},n.getGameData=function(){return i18n.t("gameData",{returnObjectTrees:!0})},n.getFeedbackData=function(){return i18n.t("feedbackView",{returnObjectTrees:!0})},n.getGameViewData=function(){return i18n.t("gameView",{returnObjectTrees:!0})},n},daf_igra_01.TitleView=function(n){var e={};e.data=n.data;var a=function(){var n='\n    <div id="titleView" class="view">\n      <div class="viewContent">\n        <p class="annotation">'+e.data.text+'</p>\n        <div class="button">\n          <p>'+e.data.button+"</p>\n        </div>\n      </div>\n    </div>\n    ";$("#contentWrapper").append(n),$("#contentWrapper #titleView .button").one("click",t)},t=function(){$(e).trigger("onTitleViewClicked"),$("#contentWrapper #titleView").remove()};return e.init=function(){a()},e},daf_igra_01.FeedbackView=function(n){var e={},a=n.data,t=function(n){var e=a.text;e=e.replace("***","<span>"+n+"</span>");var t='\n    <div id="feedbackView" class="view">\n      <div class="viewContent">\n        <p class="annotation">'+e+'</p>\n        <div class="button">\n          <p>'+a.button+"</p>\n        </div>\n      </div>\n    </div>\n    ";$("#contentWrapper").append(t),$("#contentWrapper #feedbackView .button").one("click",i)},i=function(){$("#contentWrapper #feedbackView").remove(),$(e).trigger("onFeedbackViewClicked")};return e.init=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;t(n)},e},daf_igra_01.InfoBar=function(n){var e={},a=n.data,t=0,i=void 0,r=function(){var n='\n      <div id="infoBar">\n        <p id="time">\n          <span id="m">00</span>:<span id="s">00</span>\n        </p>\n        <p id="question">QUESTION</p>\n        <p id="score"><span id="pointsInt">0</span> <span>'+a.points+"</span></p>\n      </div>\n      ";$("#contentWrapper").append(n)},o=function(n){document.getElementById("question").innerHTML=n},_=function(n){document.querySelector("#score #pointsInt").innerHTML=n},d=function(){var n=parseInt(document.querySelector("#score #pointsInt").innerHTML);n+=daf_igra_01.CORRECT_ANSWER_POINTS,_(n)},s=function(){var n=parseInt(document.querySelector("#score #pointsInt").innerHTML);n-=daf_igra_01.WRONG_ANSWER_POINTS,_(n)},f=function(){return parseInt(document.querySelector("#score #pointsInt").innerHTML)},c=function(){i=setInterval(function(){u()},1e3),u()},u=function(){t<daf_igra_01.GAME_TIME_IN_SECONDS+1?(p(t),t++):(g(),$(e).trigger("onEndOfTime"))},g=function(){clearInterval(i),t=0},p=function(n){var e=(daf_igra_01.GAME_TIME_IN_SECONDS-n)%60,a=Math.floor((daf_igra_01.GAME_TIME_IN_SECONDS-n)/60);e="0"+e;var t=e.slice(-2);a="0"+a;var i=a.slice(-2),r='<span id="m">'+i+'</span>:<span id="s">'+t+"</span>";document.getElementById("time").innerHTML=r},l=function(){t=0,_(t),$("#contentWrapper #infoBar").remove()};return e.init=function(){r(),c()},e.setQuestion=function(n){o(n)},e.incrementScore=function(){d()},e.decrementScore=function(){s()},e.getScore=function(){return f()},e.reset=function(){l()},e},daf_igra_01.SpawnControl=function(n){var e={},a=n.data,t=[],i=[],r=void 0,o=function(){return _(),daf_igra_01.CURRENT_ID=daf_igra_01.getRandomIntInRange(0,a.length-1),d(),a[daf_igra_01.CURRENT_ID].question},_=function(){t.length=0,i.length=0},d=function(){for(var n=0;n<a[daf_igra_01.CURRENT_ID].answers.length;n++)t.push(a[daf_igra_01.CURRENT_ID].answers[n]);for(var e=0;e<a.length;e++)if(e!==daf_igra_01.CURRENT_ID)for(var r=0;r<a[e].answers.length;r++)i.push(a[e].answers[r])},s=function(){},f=function(){g()},c=function(){clearTimeout(r),u()},u=function(){$("#gameView .answer").each(function(n,e){T($(e))})},g=function n(){var a="",o=0;daf_igra_01.getPercentChance(daf_igra_01.CORRECT_SPAWN_PERCENT)?(a=t[daf_igra_01.getRandomIntInRange(0,t.length-1)],o=daf_igra_01.CURRENT_ID):(a=i[daf_igra_01.getRandomIntInRange(0,i.length-1)],o=daf_igra_01.CURRENT_ID+1),$(e).trigger("onSpawn",{spawn:a});var _='\n    <div class="answer" data-id="'+o+'">\n      <div class="textWrapper">\n        <p>'+a+"</p>\n      </div>\n    </div>\n    ";$("#gameView").append(_),setTimeout(function(){p()},35),setTimeout(function(){l()},75),r=setTimeout(function(){n()},1e3*daf_igra_01.SPAWN_TIME_IN_SECONDS)},p=function(){var n,e=$("#gameView .answer").length,a=$($("#gameView .answer")[e-1]),t=a.outerWidth(),i=20,r=1024-t-i,o=daf_igra_01.getRandomIntInRange(-daf_igra_01.MAX_ROTATION,daf_igra_01.MAX_ROTATION);o=20,r<0?(r=0,n=0):n=daf_igra_01.getRandomIntInRange(i,r),a.css({left:n,top:o})},l=function(){var n=$("#gameView .answer").length,e=$($("#gameView .answer")[n-1]),a=0,t=daf_igra_01.getRandomIntInRange(-daf_igra_01.MAX_ROTATION,daf_igra_01.MAX_ROTATION);e.css({"-webkit-transform":"translate("+a+"px, "+daf_igra_01.MAX_Y_POSITION+"px) rotate("+t+"deg)","-moz-transform":"translate("+a+"px, "+daf_igra_01.MAX_Y_POSITION+"px) rotate("+t+"deg)","-o-transform":"translate("+a+"px, "+daf_igra_01.MAX_Y_POSITION+"px) rotate("+t+"deg)","-ms-transform":"translate("+a+"px, "+daf_igra_01.MAX_Y_POSITION+"px) rotate("+t+"deg)",transform:"translate("+a+"px, "+daf_igra_01.MAX_Y_POSITION+"px) rotate("+t+"deg)","-webkit-transition-duration":daf_igra_01.ANSWER_FALL_TIME+"s","transition-duration":daf_igra_01.ANSWER_FALL_TIME+"s","-webkit-transition-timing-function":daf_igra_01.EASING_FUNCTION_TO_USE,"-moz-transition-timing-function":daf_igra_01.EASING_FUNCTION_TO_USE,"-o-transition-timing-function":daf_igra_01.EASING_FUNCTION_TO_USE,"transition-timing-function":daf_igra_01.EASING_FUNCTION_TO_USE}),e.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",m)},m=function(n){T($(n.target))},T=function(n){n.off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",m),n.remove()},v=function(n){n.find(".textWrapper").addClass("shake").one("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",I)},I=function n(e){$(e.currentTarget).off("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",n),$(e.currentTarget).removeClass("shake")},E=function(n){n.find(".textWrapper").addClass("scale-0 ").one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",N)},N=function n(e){$(e.currentTarget).off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",n),T($(e.currentTarget).parent())},w=function(){_()};return e.init=function(){},e.startSpawn=function(){f()},e.stopSpawn=function(){c()},e.getQuestion=function(){return o()},e.getObject=function(){return s()},e.removeAnswer=function(n){T(n)},e.scaleAnswer=function(n){E(n)},e.shakeAnswer=function(n){v(n)},e.reset=function(){w()},e},daf_igra_01.TitleControl=function(){var n={};return n.init=function(){},n},daf_igra_01.GameControl=function(n){var e={},a=n.infoBar,t=n.spawnControl,i=n.feedbacView,r=n.particles,o=void 0,_=void 0,d=function(){I(),s(),a.init(),a.setQuestion(t.getQuestion()),t.startSpawn(),f(),u(),g()},s=function n(){o=setTimeout(function(){a.setQuestion(t.getQuestion()),n()},1e3*daf_igra_01.NEW_QUESTION_TIMER_IN_SECONDS)},f=function(){$("#gameView").on("click",l)},c=function(){$("#gameView").off("click",l)},u=function(){$(a).one("onEndOfTime",p)},g=function(){$(i).one("onFeedbackViewClicked",function(){d()})},p=function(){t.stopSpawn(),clearTimeout(o),i.init(a.getScore()),N()},l=function(n){if(_=$(n.target),!_.hasClass("view")){_.attr({"data-clickable":!1});var e=parseInt(_.attr("data-id"));m({answer:_,id:e})}},m=function(n){n.id===daf_igra_01.CURRENT_ID?T(n):v(n)},T=function(n){t.scaleAnswer(n.answer),a.incrementScore(),r.makeParticles({parent:n.answer,numberOfParticles:24,type:"sphere"})},v=function(n){t.shakeAnswer(n.answer),a.decrementScore(),n.answer.attr({"data-clickable":""})},I=function(){$("#contentWrapper").prepend('<div id="gameView" class="view"></div>')},E=function(){c(),$("#contentWrapper #gameView").remove()},N=function(){E(),t.reset(),a.reset()};return e.init=function(){d()},e},daf_igra_01.Particles=function(n){var e={},a=n.parent||"body",t=n.numberOfParticles||1,i=n.duration||1,r=n.type||"sphere",o=["linear","ease","ease-in","ease-out"],_=function(n){a=n.parent||a,t=n.numberOfParticles||t,i=n.duration||i,r=n.type||r;for(var e=void 0,o=0;o<t;o++){var _='<div class="particle" data-type="'+r+'"></div>';e+=_}a.append(e),setTimeout(function(){d(a)},35)},d=function(n){var e=daf_igra_01.getRandomInRange(.35,.7),a=o[1];n.find(".particle").each(function(n,t){var i=daf_igra_01.getRandomIntInRange(-daf_igra_01.PARTICLE_MAX_OFFSET,daf_igra_01.PARTICLE_MAX_OFFSET),r=daf_igra_01.getRandomIntInRange(-daf_igra_01.PARTICLE_MAX_OFFSET,daf_igra_01.PARTICLE_MAX_OFFSET),o=daf_igra_01.getRandomIntInRange(0,720),_=daf_igra_01.getRandomInRange(.1,.2),d=daf_igra_01.getRandomIntInRange(0,255),s=daf_igra_01.getRandomIntInRange(0,255),f=daf_igra_01.getRandomIntInRange(0,255);$(t).css({"-webkit-transform":"translate("+i+"px, "+r+"px) rotate("+o+"deg) scale("+_+")","-moz-transform":"translate("+i+"px, "+r+"px) rotate("+o+"deg) scale("+_+")","-o-transform":"translate("+i+"px, "+r+"px) rotate("+o+"deg) scale("+_+")","-ms-transform":"translate("+i+"px, "+r+"px) rotate("+o+"deg) scale("+_+")",transform:"translate("+i+"px, "+r+"px) rotate("+o+"deg) scale("+_+")","-webkit-transition-duration":e+"s","transition-duration":e+"s","-webkit-transition-timing-function":a,"-moz-transition-timing-function":a,"-o-transition-timing-function":a,"transition-timing-function":a,"background-color":"rgb("+d+",  "+s+", "+f+")"})})};return e.init=function(){},e.makeParticles=function(n){_(n)},e},daf_igra_01.Controller=function(){var n={};return n.init=function(){},n},daf_igra_01.Bootstrap=function(){var n={},e=daf_igra_01.DataHandler(),a=daf_igra_01.FeedbackView({data:e.getFeedbackData()});$(a).on("onFeedbackViewClicked",function(){});var t=daf_igra_01.InfoBar({data:e.getGameViewData()}),i=daf_igra_01.SpawnControl({data:e.getGameData()}),r=daf_igra_01.Particles({parent:"#contentWrapper",numberOfParticles:10,duration:1,type:"sphere"}),o=daf_igra_01.GameControl({infoBar:t,spawnControl:i,feedbacView:a,particles:r}),_=daf_igra_01.TitleView({data:e.getTitleData()});return $(_).on("onTitleViewClicked",function(){daf_igra_01.removePreloader(),o.init()}),_.init(),daf_igra_01.removePreloader(),n.init=function(){},n},function(){function n(){FastClick.attach(document.body),daf_igra_01.Bootstrap(),$(document).on("keypress",e)}function e(n){115===n.keyCode&&($(document).off("keypress",e),a())}function a(){$("#wrapper").prepend(v),s=$("#devView #gameTime"),f=$("#devView #questionTime"),c=$("#devView #spawnTime"),u=$("#devView #fallTime"),g=$("#devView #maxRotation"),p=$("#devView #spawnPercent"),l=$("#devView #pointsUp"),m=$("#devView #pointsDown"),T=$("#devView #fallMethod"),t()}function t(){_(),$("#devView form #submit").one("click",i),$("body").removeClass("loading")}function i(){$("#devView form #submit").off("click",i),r(),$("#devView").remove(),$(document).on("keypress",e)}function r(){daf_igra_01.GAME_TIME_IN_SECONDS=parseFloat(s[0].value),daf_igra_01.NEW_QUESTION_TIMER_IN_SECONDS=parseFloat(f[0].value),daf_igra_01.SPAWN_TIME_IN_SECONDS=parseFloat(c[0].value),daf_igra_01.ANSWER_FALL_TIME=parseFloat(u[0].value),daf_igra_01.MAX_ROTATION=parseFloat(g[0].value),daf_igra_01.CORRECT_ANSWER_POINTS=parseFloat(l[0].value),daf_igra_01.WRONG_ANSWER_POINTS=parseFloat(m[0].value),daf_igra_01.EASING_FUNCTION_TO_USE=T[0].value;var n=parseFloat(p[0].value);n=n>100?100:n,n=n<=0?-1:n,daf_igra_01.CORRECT_SPAWN_PERCENT=n,o()}function o(){Cookies.set("gameTime",daf_igra_01.GAME_TIME_IN_SECONDS),Cookies.set("questionTime",daf_igra_01.NEW_QUESTION_TIMER_IN_SECONDS),Cookies.set("spawnTime",daf_igra_01.SPAWN_TIME_IN_SECONDS),Cookies.set("fallTime",daf_igra_01.ANSWER_FALL_TIME),Cookies.set("maxRotation",daf_igra_01.MAX_ROTATION),Cookies.set("pointsUp",daf_igra_01.CORRECT_ANSWER_POINTS),Cookies.set("pointsDown",daf_igra_01.WRONG_ANSWER_POINTS),Cookies.set("fallMethod",daf_igra_01.EASING_FUNCTION_TO_USE),Cookies.set("spawnPercent",daf_igra_01.CORRECT_SPAWN_PERCENT)}function _(){void 0===Cookies.get("gameTime")||d()}function d(){s[0].value=Cookies.get("gameTime"),f[0].value=Cookies.get("questionTime"),c[0].value=Cookies.get("spawnTime"),u[0].value=Cookies.get("fallTime"),g[0].value=Cookies.get("maxRotation"),p[0].value=Cookies.get("spawnPercent"),l[0].value=Cookies.get("pointsUp"),m[0].value=Cookies.get("pointsDown"),T[0].value=Cookies.get("fallMethod")}$(document).one("i18nComplete",n);var s=void 0,f=void 0,c=void 0,u=void 0,g=void 0,p=void 0,l=void 0,m=void 0,T=void 0,v='\n  <div id="devView">\n          <form action="" method="get">\n            Game time  <input type="text" id="gameTime" name="" value="50"> (sec)\n            <br><br>\n            New question time  <input type="text" id="questionTime" name="" value="10"> (sec)\n            <br><br>\n            Answer spawn time  <input type="text" id="spawnTime" name="" value="1"> (sec)\n            <br><br>\n            Answer fall time  <input type="text" id="fallTime" name="" value="20"> (sec)\n            <br><br>\n            Answer max rotation  <input type="text" id="maxRotation" name="" value="20"> (deg)\n            <br><br>\n            Answer correct spawn %  <input type="text" id="spawnPercent" name="" value="50"> (%)\n            <br><br>\n\n            Points up for correct  <input type="text" id="pointsUp" name="" value="10">\n            <br><br>\n            Points down for wrong  <input type="text" id="pointsDown" name="" value="10">\n            <br><br>\n            Answer fall method <select id="fallMethod" name="fallMethod">\n                <option value="linear">linear</option>\n                <option value="ease">ease</option>\n                <option value="ease-out">ease-out</option>\n                <option value="ease-in">ease-in</option>\n              </select>\n              <br><br>\n            <p id="submit">Potrdi</p>\n          </form>\n        </div>\n        '}();